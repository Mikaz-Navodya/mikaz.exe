<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hacker Portfolio | Nuvindya</title>

<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: "Courier New", monospace;
}

/* ===== SPLASH SCREEN STYLES ===== */
#splash-screen {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100vh;
  background-color: #000;
  z-index: 9999;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  color: #00bfff;
  padding: 20px;
}

#splash-text {
  font-size: 1.5rem;
  font-weight: bold;
  text-shadow: 0 0 10px #00bfff;
  white-space: pre-wrap;
  line-height: 1.5;
  margin-bottom: 30px;
  max-width: 800px;
  width: 100%;
}

#press-key-msg {
  font-size: 1.2rem;
  color: #fff;
  animation: blink-fast 1s infinite;
  display: none; /* Hidden initially */
  cursor: pointer;
  text-align: center;
}

@keyframes blink-fast {
  0%, 50% { opacity: 1; }
  51%, 100% { opacity: 0; }
}

.fade-out {
  opacity: 0;
  transition: opacity 1s ease-out;
  pointer-events: none;
}

/* ===== MUSIC CONTROL BUTTON ===== */
.music-btn {
  position: fixed;
  top: 20px;
  left: 20px;
  z-index: 2000; /* Above matrix */
  background: rgba(0, 0, 0, 0.85);
  border: 1px solid #00bfff;
  color: #00bfff;
  padding: 10px 15px;
  font-weight: bold;
  cursor: pointer;
  box-shadow: 0 0 10px rgba(0, 191, 255, 0.2);
  transition: all 0.3s ease;
  display: none; /* Hidden until splash ends */
  user-select: none;
}

.music-btn:hover {
  background: #00bfff;
  color: black;
  box-shadow: 0 0 20px #00bfff;
}

.music-btn.muted {
  border-color: #555;
  color: #777;
  box-shadow: none;
}

/* ===== DOWNLOAD CV BUTTON STYLES ===== */
.cv-fab-container {
  position: fixed;
  bottom: 30px;
  right: 30px;
  width: 70px;
  height: 70px;
  cursor: pointer;
  z-index: 2000; 
  display: flex;
  align-items: center;
  justify-content: center;
  transition: transform 0.2s ease;
}

.cv-fab-container:hover {
  transform: scale(1.1);
}

.cv-btn {
  width: 56px;
  height: 56px;
  background: rgba(0, 0, 0, 0.9);
  border-radius: 50%;
  border: 1px solid #00bfff;
  color: #00bfff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 1.1rem;
  box-shadow: 0 0 10px rgba(0, 191, 255, 0.4);
  position: absolute;
  z-index: 2002;
}

.progress-ring {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  transform: rotate(-90deg);
  pointer-events: none;
}

.progress-ring__circle {
  stroke: #00bfff;
  stroke-width: 4;
  stroke-dasharray: 283;        /* 2Ï€r â†’ 2 * 3.14 * 45 */
  stroke-dashoffset: 283;
  transition: stroke-dashoffset 1.5s ease-in-out;
  transform-origin: 50% 50%;
}


/* ===== Education Tech Card ===== */
.edu-container {
  display: flex;
  flex-direction: column;
  gap: 30px;
}

.edu-card {
  position: relative;
  border: 1px solid #00bfff;
  background: rgba(0, 0, 0, 0.85);
  padding: 30px 20px 20px 30px;
  box-shadow: 0 0 10px rgba(0, 191, 255, 0.2);
  transition: all 0.3s ease;
}

.edu-card:hover {
  box-shadow: 0 0 20px rgba(0, 191, 255, 0.5);
  transform: translateX(5px);
}

/* --- Rotating Gears --- */
.gears-box {
  position: absolute;
  top: -15px;
  left: -15px;
  width: 50px;
  height: 50px;
  z-index: 10;
}

.gear {
  position: absolute;
  color: #00bfff;
  line-height: 1;
  text-shadow: 0 0 5px #00bfff;
}

.gear-lg {
  font-size: 28px;
  top: 0;
  left: 0;
  animation: spin-right 4s linear infinite;
}

.gear-sm {
  font-size: 18px;
  top: 22px;
  left: 22px; 
  color: #ffffff; 
  animation: spin-left 2s linear infinite;
}

@keyframes spin-right { 100% { transform: rotate(360deg); } }
@keyframes spin-left { 100% { transform: rotate(-360deg); } }

/* --- Content Styles --- */
.edu-title {
  color: #fff;
  font-size: 1.1rem;
  font-weight: bold;
  margin-left: 20px; 
  margin-bottom: 5px;
}

.edu-desc {
  color: #66ccff;
  font-size: 0.9rem;
  margin-left: 20px;
  margin-bottom: 20px;
}

/* --- Terminal Progress Bar --- */
.edu-bar {
  font-family: 'Courier New', monospace;
  font-size: 0.85rem;
  color: #00bfff;
  white-space: pre; 
  overflow-x: hidden; 
  opacity: 0.9;
}
/* ===== Core Styles ===== */
body {
  background: black;
  color: #00bfff;
  overflow-x: hidden;
}

h2 {
  border-left: 4px solid #00bfff;
  padding-left: 10px;
  margin-bottom: 20px;
  text-shadow: 0 0 10px #00bfff;
}

section {
  padding: 70px 10%;
}

/* ===== Matrix Background ===== */
canvas {
  position: fixed;
  top: 0;
  left: 0;
  z-index: -1;
  filter: blur(1.5px);
  opacity: 0.85;
}

/* ===== Header ===== */
header {
  padding: 40px;
  text-align: center;
  border-bottom: 1px solid #00bfff;
}

header h1 {
  font-size: 3.2rem;
  font-weight: bold;
  text-shadow: 0 0 15px #00bfff, 0 0 35px #007bff;
}

.cursor::after {
  content: "_";
  margin-left: 5px;
  animation: blink 1s infinite;
}

@keyframes blink {
  0%, 50% { opacity: 1; }
  51%, 100% { opacity: 0; }
}

/* ===== Profile Section ===== */
.profile {
  text-align: center;
  padding: 60px 10%;
}

.photo-wrapper {
  width: 240px;
  height: 260px;
  margin: auto;
  padding: 4px;
  background: linear-gradient(120deg, #00bfff, #0044ff, #00bfff);
  background-size: 300% 300%;
  animation: cyberFlow 3s linear infinite;
  box-shadow: 0 0 25px #00bfff;
}

@keyframes cyberFlow {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

.photo-wrapper img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  background: black;
}

/* ===== Command Terminal ===== */
.command-box {
  margin-top: 40px;
  border: 1px solid #00bfff;
  padding: 18px;
  width: 400px;
  margin-left: auto;
  margin-right: auto;
  box-shadow: 0 0 20px #00bfff;
  text-align: left;
  font-weight: 700;
}

.output {
  font-size: 0.95rem;
  color: #66ccff;
  line-height: 1.6;
  min-height: 150px;
}

.command-options {
  margin-top: 20px;
  margin-bottom: 20px;
  display: none;
}

.command-box input {
  width: 100%;
  background: black;
  border: none;
  outline: none;
  color: #00bfff;
  font-size: 1rem;
  font-weight: 700;
  display: none;
}

/* ===== Skills Terminal ===== */
.skill-item {
  cursor: pointer;
  margin: 10px 0;
  color: #00bfff;
  font-weight: bold;
  text-shadow: 0 0 8px #00bfff;
}

.skill-item:hover {
  color: #66ccff;
}

.skill-details {
  display: none;
  margin-top: 10px;
  margin-bottom: 20px;
  font-size: 0.9rem;
  color: #66ccff;
  border: 1px solid #00bfff;
  padding: 15px;
  background: rgba(0, 0, 0, 0.9);
  box-shadow: 0 0 15px rgba(0, 191, 255, 0.4);
  width: 100%;
  max-width: 500px;
}

.progress-line {
  margin: 6px 0;
  white-space: pre;
}

/* ===== Projects Scroll Cards ===== */
.projects-container {
  display: flex;
  gap: 25px;
  overflow-x: auto;
  padding: 75px 55px 30px;
  scroll-behavior: smooth;
  height :480px;
  scrollbar-width: none;        
  -ms-overflow-style: none; 
}

.projects-container::-webkit-scrollbar {
  display:none;
  height: 26px;
}

.project-card {
  min-width: 260px;
  background: rgba(0, 0, 0, 0.8);
  border: 1px solid #00bfff;
  padding: 20px;
  box-shadow: 0 0 15px rgba(0,191,255,0.6);
  transition: all 0.3s ease;
  cursor: pointer;
  height: 340px;
}

.project-card h3 {
  color: #00bfff;
  margin-bottom: 10px;
  text-shadow: 0 0 10px #00bfff;
}

.project-card p {
  font-size: 0.9rem;
  color: #66ccff;
  line-height: 1.4;
}

.project-card:hover {
  transform: translateY(-8px) scale(1.03);
  box-shadow: 0 0 30px #00bfff, 0 0 60px #007bff;
}

/* ===== Experience Tech Frame Styles ===== */
.mech-container {
  display: flex;
  flex-direction: column;
  gap: 60px;
  padding-top: 30px;
}

.mech-wrapper {
  position: relative;
  width: 100%;
  max-width: 700px;
  margin: 0 auto;
}

.mech-card {
  position: relative;
  background: rgba(0, 0, 0, 0.85);
  border: 2px solid #00bfff; 
  padding: 40px 30px 30px 40px;
  clip-path: polygon(
    20px 0, 100% 0, 
    100% calc(100% - 20px), calc(100% - 20px) 100%, 
    0 100%, 0 20px
  );
  box-shadow: 0 0 15px rgba(0, 191, 255, 0.2);
  transition: transform 0.3s ease;
}

.mech-wrapper:hover .mech-card {
  transform: scale(1.01);
  box-shadow: 0 0 25px rgba(0, 191, 255, 0.4);
}

.mech-notch-top {
  position: absolute;
  top: -2px; 
  left: 50%;
  transform: translateX(-50%);
  width: 120px;
  height: 12px;
  background: black; 
  border-bottom: 2px solid #00bfff;
  border-left: 2px solid #00bfff;
  border-right: 2px solid #00bfff;
  clip-path: polygon(0 0, 15px 100%, 105px 100%, 120px 0);
  z-index: 10;
}

.mech-tab-bottom {
  position: absolute;
  bottom: -10px; 
  left: 50%;
  transform: translateX(-50%);
  width: 140px;
  height: 12px;
  background: #00bfff; 
  clip-path: polygon(15px 0, 125px 0, 140px 100%, 0 100%);
  z-index: 10;
}

.mech-badge-outer {
  position: absolute;
  top: -27px;   
  left: -17px;  
  width: 54px;   
  height: 60px;  
  background: #00bfff; 
  clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
  z-index: 15;
  box-shadow: 0 0 15px #00bfff;
  display: flex;
  align-items: center;
  justify-content: center;
}

.mech-badge-inner {
  width: 50px;
  height: 56px;
  background: black;
  color: #00bfff;
  clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 1.4rem;
}

.mech-content h3 {
  color: #ffffff;
  font-size: 1.2rem;
  margin-bottom: 5px;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.mech-content .role {
  color: #00bfff;
  font-weight: bold;
  margin-bottom: 15px;
  display: block;
}

.mech-content p {
  color: #aaddff;
  font-size: 0.9rem;
  line-height: 1.6;
}
/* ================= MOBILE RESPONSIVE FIXES ================= */
@media (max-width: 1024px) {
  section {
    padding: 60px 6%;
  }

  header h1 {
    font-size: 2.6rem;
  }

  .projects-container {
    padding: 60px 30px 30px;
  }
}

/* ================= TABLET & MOBILE ================= */
@media (max-width: 768px) {

  header {
    padding: 25px 10px;
  }

  header h1 {
    font-size: 2.2rem;
  }

  .profile {
    padding: 40px 6%;
  }

  .photo-wrapper {
    width: 190px;
    height: 210px;
  }

  .command-box {
    width: 100%;
    max-width: 100%;
    font-size: 0.9rem;
  }

  .output {
    min-height: 120px;
  }

  section {
    padding: 50px 6%;
  }

  h2 {
    font-size: 1.2rem;
  }

  .skill-details {
    max-width: 100%;
  }

  .projects-container {
    gap: 20px;
    height: auto;
    padding: 40px 15px;
  }

  .project-card {
    min-width: 240px;
    height: auto;
  }

  .mech-card {
    padding: 30px 20px 25px 25px;
  }

  .edu-card {
    padding: 25px 15px 20px 25px;
  }

  .edu-title,
  .edu-desc {
    margin-left: 10px;
  }
}

/* ================= SMALL MOBILE PHONES ================= */
@media (max-width: 480px) {

  header h1 {
    font-size: 1.9rem;
  }

  .music-btn {
    top: 10px;
    left: 10px;
    padding: 8px 12px;
    font-size: 1.2rem; /* Adjusted for emoji */
  }

  .cv-fab-container {
    width: 56px;
    height: 56px;
  }

  .cv-btn {
    width: 44px;
    height: 44px;
    font-size: 0.85rem;
  }
  
  .photo-wrapper {
    width: 160px;
    height: 180px;
  }

  .command-box {
    padding: 14px;
  }

  .output {
    font-size: 0.85rem;
  }

  .projects-container {
    padding: 30px 10px;
  }

  .project-card {
    min-width: 220px;
  }

  .mech-badge-outer {
    transform: scale(0.85);
  }

  .edu-bar {
    font-size: 0.75rem;
  }
  
  /* Make skill lines smaller on mobile */
  .progress-line {
      font-size: 0.8rem;
  }

  canvas {
    filter: blur(1px);
  }
}

</style>
</head>

<body>

<audio id="bg-music" loop>
  <source src="background-music.mp3" type="audio/mp3">
</audio>

<div id="music-control" class="music-btn" onclick="toggleMusic()">
  [ ðŸ”Š MUSIC: ON ]
</div>

<div id="splash-screen">
  <div id="splash-text"></div>
  <div id="press-key-msg">[ PRESS ANY KEY TO CONTINUE ]</div>
</div>

<div class="cv-fab-container" onclick="downloadCV()">
  <svg class="progress-ring" viewBox="0 0 100 100">
  <circle
    class="progress-ring__circle"
    cx="50"
    cy="50"
    r="45"
    fill="transparent"
  />
</svg>

  <div class="cv-btn">CV</div>
</div>

<canvas id="matrix"></canvas>

<header>
  <h1 class="cursor">> Mikaz.exe</h1>
</header>

<div class="profile">
  <div class="photo-wrapper">
    <img src="your-photo.jpg" alt="Profile Photo">
  </div>

  <div class="command-box">
    <div class="output" id="output"></div>
   <div class="command-options" id="commandMenu"></div>
    > Enter command:
    <input type="text" id="commandInput" placeholder="type and press Enter">
  </div>
</div>

<section id="about"><h2>> About</h2><p>Cybersecurity enthusiast.</p></section>

<section id="skills">
  <h2>> Skills</h2>
  <div class="skill-item" onclick="toggleSkill(this,'web')">
    â–¸ Web Development
  </div>
  <div class="skill-details" id="web"></div>
  <div class="skill-item" onclick="toggleSkill(this,'game')">
    â–¸ Game Development
  </div>
  <div class="skill-details" id="game"></div>
</section>

<section id="projects">
  <h2>> Projects</h2>
  <div class="projects-container">
    <div class="project-card">
      <h3>> Game Development</h3>
      <p>Unreal Engine, Unity, gameplay mechanics, level design</p>
    </div>
    <div class="project-card">
      <h3>> Web Development</h3>
      <p>HTML, CSS, JavaScript, interactive hacker UIs</p>
    </div>
    <div class="project-card">
      <h3>> ERP Systems</h3>
      <p>SAP fundamentals, business process modeling</p>
    </div>
    <div class="project-card">
      <h3>> AI Projects</h3>
      <p>Computer vision, intelligent systems</p>
    </div>
    <div class="project-card">
      <h3>> NLP Projects</h3>
      <p>Text processing, translation, sentiment analysis</p>
    </div>
    <div class="project-card">
      <h3>> Machine Learning</h3>
      <p>Prediction models, data analysis, automation</p>
    </div>
  </div>
</section>

<section id="experience">
  <h2>> Experience</h2>
  
  <div class="mech-container">
    
    <div class="mech-wrapper">
      <div class="mech-badge-outer">
        <div class="mech-badge-inner">1</div>
      </div>
      
      <div class="mech-notch-top"></div>
      
      <div class="mech-card">
        <div class="mech-content">
          <h3>SAP Projects</h3>
          <span class="role">> Business Process Consultant</span>
          <p>Managed enterprise resource planning integration, optimized business workflows using SAP solutions, and conducted system audits for efficiency improvements.</p>
        </div>
      </div>

      <div class="mech-tab-bottom"></div>
    </div>

    <div class="mech-wrapper">
      <div class="mech-badge-outer">
        <div class="mech-badge-inner">2</div>
      </div>
      
      <div class="mech-notch-top"></div>
      
      <div class="mech-card">
        <div class="mech-content">
          <h3>Mogo Games</h3>
          <span class="role">> Game Instructor</span>
          <p>Taught game development fundamentals using Unity and Unreal Engine. Guided students through level design, C# scripting, and 3D asset integration.</p>
        </div>
      </div>

      <div class="mech-tab-bottom"></div>
    </div>

    <div class="mech-wrapper">
      <div class="mech-badge-outer">
        <div class="mech-badge-inner">3</div>
      </div>
      
      <div class="mech-notch-top"></div>
      
      <div class="mech-card">
        <div class="mech-content">
          <h3>Freelance</h3>
          <span class="role">> Full Stack Developer</span>
          <p>Developed custom web applications and interactive portfolios. Specialized in hacker-themed UIs and responsive front-end design using modern frameworks.</p>
        </div>
      </div>

      <div class="mech-tab-bottom"></div>
    </div>

  </div>
</section>

<section id="education">
  <h2>> Education</h2>
  
  <div class="edu-container">

    <div class="edu-card">
      <div class="gears-box">
        <div class="gear gear-lg">âš™</div>
        <div class="gear gear-sm">âš™</div>
      </div>
      
      <div class="edu-title">> BSc in Information Technology</div>
      <div class="edu-desc">University of Moratuwa | Specialization in Software Eng.</div>
      
      <div class="edu-bar">| ===================================== | 100%</div>
    </div>

    <div class="edu-card">
      <div class="gears-box">
        <div class="gear gear-lg">âš™</div>
        <div class="gear gear-sm">âš™</div>
      </div>
      
      <div class="edu-title">> SAP Professional Fundamentals</div>
      <div class="edu-desc">Coursera Certification</div>
      
      <div class="edu-bar">| ===================================== | 100%</div>
    </div>

    <div class="edu-card">
      <div class="gears-box">
        <div class="gear gear-lg">âš™</div>
        <div class="gear gear-sm">âš™</div>
      </div>
      
      <div class="edu-title">> Game Development Training</div>
      <div class="edu-desc">Ongoing advanced mechanics study</div>
      
      <div class="edu-bar">| =============================         | _78%</div>
    </div>

  </div>
</section>

<section id="contact"><h2>> Contact</h2><p>nuvindya@protonmail.com</p></section>

<script>
/* ===== MUSIC CONTROL LOGIC ===== */
const audio = document.getElementById("bg-music");
const musicBtn = document.getElementById("music-control");

function updateMusicBtnText() {
  const isMobile = window.innerWidth <= 480;
  if (audio.paused) {
    musicBtn.innerHTML = isMobile ? "ðŸ”‡" : "[ ðŸ”‡ MUSIC: OFF ]";
    musicBtn.classList.add("muted");
  } else {
    musicBtn.innerHTML = isMobile ? "ðŸ”Š" : "[ ðŸ”Š MUSIC: ON ]";
    musicBtn.classList.remove("muted");
  }
}

function toggleMusic() {
  if (audio.paused) {
    audio.play();
  } else {
    audio.pause();
  }
  updateMusicBtnText();
}

// Update music text on resize to switch between Emoji and Text
window.addEventListener("resize", updateMusicBtnText);

/* ===== DOWNLOAD CV LOGIC ===== */
function downloadCV() {
  const circle = document.querySelector('.progress-ring__circle');
  const btn = document.querySelector('.cv-btn');
  
  circle.style.strokeDashoffset = '0';
  btn.style.boxShadow = '0 0 25px #00bfff';
  btn.textContent = "WAIT";

  setTimeout(() => {
    btn.textContent = "DONE";
    window.open('#', '_blank'); 
    setTimeout(() => {
      circle.style.strokeDashoffset = '283'; 
      btn.textContent = "CV";
      btn.style.boxShadow = '0 0 10px rgba(0, 191, 255, 0.4)';
    }, 2000);
  }, 1500);
}

/* ===== SPLASH SCREEN LOGIC ===== */
const splashText = document.getElementById("splash-text");
const pressKeyMsg = document.getElementById("press-key-msg");
const splashScreen = document.getElementById("splash-screen");

const bootMessages = [
  "Initializing System...",
  "Loading Modules...",
  "Verifying Encryption Keys...",
  "Establishing Secure Connection...",
  "Access Granted."
];

let msgIndex = 0;

function typeSplash() {
  if (msgIndex < bootMessages.length) {
    let txt = bootMessages[msgIndex];
    let charIndex = 0;
    
    const lineDiv = document.createElement('div');
    splashText.appendChild(lineDiv);

    const typeChar = setInterval(() => {
      lineDiv.textContent += txt.charAt(charIndex);
      charIndex++;
      if (charIndex >= txt.length) {
        clearInterval(typeChar);
        msgIndex++;
        setTimeout(typeSplash, 400); 
      }
    }, 30); 
  } else {
    setTimeout(() => {
      pressKeyMsg.style.display = "block";
      document.addEventListener("keydown", endSplash);
      document.addEventListener("click", endSplash);
    }, 500);
  }
}


function endSplash() {
  document.removeEventListener("keydown", endSplash);
  document.removeEventListener("click", endSplash);
  
  // Try to play music
  audio.volume = 0.4;
  audio.play().catch(e => console.log("Audio play failed:", e));
  
  // Initialize music button text correctly
  updateMusicBtnText();

  // Show Music Control (Fade it in effectively by setting display)
  musicBtn.style.display = "block";

  // Fade out splash
  splashScreen.classList.add("fade-out");
  
  setTimeout(() => {
    splashScreen.style.display = "none";
    boot(); 
  }, 1000);
}

window.onload = typeSplash;


/* ===== ORIGINAL UTILITIES ===== */

const skillData = {
  web: [
    { name: "HTML", level: 78 },
    { name: "CSS", level: 48 }
  ],
  game: [
    { name: "Unreal Engine", level: 89 },
    { name: "Unity Engine", level: 2 }
  ]
};

function makeBar(percent, totalChars) {
  const filled = Math.round((percent / 100) * totalChars);
  return "#".repeat(filled) + "-".repeat(totalChars - filled);
}


function toggleSkill(element, id) {
  const box = document.getElementById(id);
  
  // Mobile Adjustments for Skill Bar
  const isMobile = window.innerWidth <= 480;
  const barLength = isMobile ? 12 : 25;   // Smaller bar on mobile
  const padLength = isMobile ? 10 : 14;   // Shorter name padding on mobile

  if (box.style.display === "block") {
    box.style.display = "none";
    box.innerHTML = "";
    element.innerHTML = element.innerHTML.replace("â–¾", "â–¸");
    return;
  }
  box.style.display = "block";
  box.innerHTML = "";
  element.innerHTML = element.innerHTML.replace("â–¸", "â–¾");

  skillData[id].forEach((skill, index) => {
    const line = document.createElement("div");
    line.className = "progress-line";
    
    // Truncate name if it's too long for mobile to prevent overflow
    let displayName = skill.name;
    if (isMobile && displayName.length > padLength) {
       displayName = displayName.substring(0, padLength - 1) + ".";
    }

    const label = `--- ${displayName.padEnd(padLength)} : `;
    line.textContent = label;
    box.appendChild(line);

    let current = 0;
    const interval = setInterval(() => {
      if (current <= skill.level) {
        line.textContent =
          label +
          makeBar(current, barLength) +
          ` = ${String(current).padStart(2, "0")}%`;
        current++;
      } else {
        clearInterval(interval);
      }
    }, 15);
  });
}

window.addEventListener("resize", () => {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
});

/* ===== Matrix Rain ===== */
const canvas = document.getElementById("matrix");
const ctx = canvas.getContext("2d");
canvas.width = innerWidth;
canvas.height = innerHeight;

const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
const fontSize = 18;
const columns = canvas.width / fontSize;
const drops = Array.from({ length: columns }, () => Math.random() * canvas.height);

setInterval(() => {
  ctx.fillStyle = "rgba(0,0,0,0.08)";
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  ctx.fillStyle = "#00bfff";
  ctx.font = fontSize + "px monospace";
  drops.forEach((y, i) => {
    ctx.fillText(letters[Math.floor(Math.random()*letters.length)], i*fontSize, y*fontSize);
    drops[i] = y*fontSize > canvas.height && Math.random()>0.97 ? 0 : y+1;
  });
}, 33);

/* ===== Typing Utilities ===== */
function typeText(text, speed = 40, callback) {
  let i = 0;
  const interval = setInterval(() => {
    output.innerHTML += text.charAt(i);
    i++;
    if (i >= text.length) {
      clearInterval(interval);
      output.innerHTML += "<br>";
      if (callback) callback();
    }
  }, speed);
}

/* ===== Boot Sequence (Main Site) ===== */
const output = document.getElementById("output");
const menu = document.getElementById("commandMenu");
const input = document.getElementById("commandInput");

const bootLines = [
  "> Access Granted...",
  "",
  "> Welcome to Mikaz Navodya's portfolio",
  "> All systems online.",
  "> Explore freely.",
  "",
  "> Available Commands:",
  "- about",
  "- skills",
  "- projects",
  "- experience",
  "- education",
  "- contact",
  ""
];

let bootIndex = 0;

function boot() {
  if (bootIndex < bootLines.length) {
    typeText(bootLines[bootIndex], 35, () => {
      bootIndex++;
      setTimeout(boot, 250);
    });
  } else {
    menu.style.display = "block";
    input.style.display = "block";
    input.focus();
  }
}

/* ===== Command Execution ===== */
const logs = [
  "",
  "[+] Establishing secure channel...",
  "[+] Bypassing firewall...",
  "[+] Injecting payload...",
  "[+] Access granted âœ”"
];

input.addEventListener("keydown", e => {
  if (e.key === "Enter") {
    const cmd = input.value.toLowerCase().trim();
    input.value = "";

    typeText("> " + cmd, 30, () => {
      let i = 0;
      function typeLog() {
        if (i < logs.length) {
          typeText(logs[i], 25, () => {
            i++;
            typeLog();
          });
        } else {
          const section = document.getElementById(cmd);
          if (section) {
            setTimeout(() => {
              output.innerHTML = "> Access Granted...<br> > Welcome to Mikaz Navodya's portfolio <br> > All systems online. <br>> Explore freely.<br><br>> Available Commands: <br>- about<br>- skills<br>- projects<br>- experience<br>- education<br>- contact <br><br>";
              section.scrollIntoView({ behavior: "smooth" });
            }, 600);
          } else {
            typeText("âœ– Unknown command.", 30);
          }
        }
      }
      typeLog();
    });
  }
});
</script>

</body>
</html>